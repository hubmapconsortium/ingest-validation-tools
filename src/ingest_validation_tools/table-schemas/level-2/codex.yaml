doc_url: https://portal.hubmapconsortium.org/docs/assays/codex
description_md: |
  There are 4 main fields in the antibodies.tsv file that are relevant for identifying channels within CODEX CODEX.  The `channel_id` is used for connecting the `antibody_name` to a given file.  Every `channel_id` contains a identifier for the cycle and channel number within that cycle (of the form `Cycle[0-9]*_CH[0-9]*`) while each tif file on globus contains a single channel, identified and connected to the `channel_id` by its location in the submission directory (of the form `src_[^/]+/cyc.*_reg.*_.*/.*_.*_Z.*_CH.*\.tif`).  The `antibody_name` is human readable and will be used for display in the portal modulo some string parsing.  The `rr_id` and `uniprot_id` fields are for standardized identifiers per channel from [The Antibody Registry](https://antibodyregistry.org/) and [UniProt](https://www.uniprot.org/) respectively.
fields:
# Overrides of Level 1 fields:
  -
    name: assay_category
    constraints:
      enum:
        - imaging
  -
    name: assay_type
    constraints:
      enum:
        - CODEX
  -
    name: analyte_class
    constraints:
      enum:
        - protein

# Level 2 fields:
  -
    heading: Level 2
    name: acquisition_instrument_vendor
    description: An acquisition_instrument is the device that contains the signal detection hardware and signal processing software. Assays generate signals such as light of various intensities or color or signals representing molecular mass.
    constraints:
      enum: ['Keyence','Zeiss']
  -
    name: acquisition_instrument_model
    description: Manufacturers of an acquisition instrument may offer various versions (models) of that instrument with different features or sensitivities. Differences in features or sensitivities may be relevant to processing or interpretation of the data.
    constraints:
      enum: ['BZ-X800','BZ-X710','Axio Observer Z1']
  -
    name: resolution_x_value
    description: The width of a pixel. (Akoya pixel is 377nm square)
  -
    name: resolution_x_unit
    description: The unit of measurement of width of a pixel.(nm)
    constraints:
      enum: ['mm', 'um', 'nm']
  -
    name: resolution_y_value
    description: The height of a pixel. (Akoya pixel is 377nm square)
  -
    name: resolution_y_unit
    description: The unit of measurement of height of a pixel. (nm)
    constraints:
      enum: ['mm', 'um', 'nm']
  -
    name: resolution_z_value
    description: 'Optional if assay does not have multiple z-levels. Note that this is resolution within a given sample: z-pitch (resolution_z_value) is the increment distance between image slices (for Akoya, z-pitch=1.5um) ie. the microscope stage is moved up or down in increments of 1.5um to capture images of several focal planes. The best one will be used & the rest discarded. The thickness of the sample itself is sample metadata.'
    constraints:
      required: False
  -
    name: resolution_z_unit
    description: The unit of incremental distance between image slices.(um)
    constraints:
      enum: ['mm', 'um', 'nm']
  -
    heading: Level 3
    name: preparation_instrument_vendor
    description: The manufacturer of the instrument used to prepare the sample for the assay.
    constraints:
      enum: ['CODEX']
  -
    name: preparation_instrument_model
    description: The model number/name of the instrument used to prepare the sample for the assay
    constraints:
      enum: ['version 1 robot','prototype robot - Stanford/Nolan Lab']
  -
    name: number_of_antibodies
    description: Number of antibodies
  -
    name: number_of_channels
    description: Number of fluorescent channels imaged during each cycle.
  -
    name: number_of_cycles
    description: Number of cycles of 1. oligo application, 2. fluor application, 3. washes
  # include: ../includes/doi/section_prep.yaml
  # include: ../includes/doi/reagent_prep.yaml
  -
    name: antibodies_path
    description: Relative path to file with antibody information for this dataset.